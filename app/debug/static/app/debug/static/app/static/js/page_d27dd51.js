!function(e){function t(e){if(!x){x=!0;var t=y.exec(location.href);t[2]&&(location.href=t[2]),h.mixin(b,e||{}),p=r(b.layer)||document.body,s=g(),n()}}function r(e){return"string"==typeof e?document.querySelector(ele):e&&e.nodeType?e:void 0}function n(){S?window.addEventListener("popstate",d):"onhashchange"in window&&window.addEventListener("hashchange",d),p.addEventListener("click",a,!0)}function a(e){for(var t=e.target,r=t,n=b.selector,a=document.body;r!==a;){if(i(r,n)){if(urlAttr="a"===r.tagName.toLowerCase()?"href":"data-href",url=r.getAttribute(urlAttr),u(url)){e.stopPropagation(),e.preventDefault();var c={replace:r.getAttribute("data-replace")||!1,container:r.getAttribute("data-container"),pagelets:r.getAttribute("data-pagelets")||"spage",target:r};o(url,c)}return}r=r.parentNode}}function i(e,t){if(!e||1!==e.nodeType)return!1;var r,n,a=e.webkitMatchesSelector||e.matchesSelector;return a?n=a.call(e,t):(r=e.parentNode,n=!!r.querySelector(t)),n}function o(e,t){return e=f(e),g()!==e?(t=h.mixin(t||{},{trigger:!0,replace:!1}),t.trigger?void l(e,t,function(){c(e,t.replace)}):c(e,t.replace)):void 0}function c(e,t){S?history[t?"replaceState":"pushState"]({},document.title,e):(e="#"+e,t?location.replace(e):location.href=e),s=e}function l(e,t,r){t=h.mixin({pagelet:"spage",url:e},t||{}),m.trigger("pagestart",e),t.cb=function(){s=e,m.trigger("pagedone",e),r&&r()},w.load(t)}function u(e){var t=b.validate;return t&&t instanceof RegExp?t.test(e):"function"==typeof t?t(e):!0}function d(){var e=g();e!==s&&l(e)}function f(e){var t=y.exec(e);if(!t)throw new Error("ilegal url formatter `"+e+"`");return t[2]||t[1]||"/"}function g(){return f(window.location.href)}var p,s,h=e.BigPipeUtil,v=e.BigPipeEvent,w=e.BigPipe,y=/^(?:[^:]+:)?(?:\/\/[^\/]*)?([^#]*)?(?:#(.*))?$/i,m={},b={selector:"a,[data-href]",layer:null,validate:null},x=!1,S=!!window.history.pushState;m.start=t,m.redirect=o,v.mixto(m),e.Page=m}(this);